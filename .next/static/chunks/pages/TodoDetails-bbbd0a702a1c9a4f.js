(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{33105:(e,o,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/TodoDetails",function(){return r(85914)}])},85914:(e,o,r)=>{"use strict";r.r(o),r.d(o,{default:()=>w});var t=r(8364),d=r(43269),n=r(27365),i=r(37316),a=r(68408),c=r(98978),l=r(35674),s=r(56952),u=r(99596),h=r(66950),g=r(39778),m=r(53296),p=r(44666),f=r(19317);let x="todos",b=()=>{try{let e=localStorage.getItem(x);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading from localStorage:",e),[]}},y=e=>{try{localStorage.setItem(x,JSON.stringify(e))}catch(e){console.error("Error writing to localStorage:",e)}},A="https://dummyjson.com/todos",w=()=>{let e=(0,d.useParams)(),o=null==e?void 0:e.id,r=(0,d.useRouter)(),{todos:x,isLoading:w,error:v}=function(){let e=(0,g.jE)(),{data:o=[],isLoading:r,error:t}=(0,m.I)({queryKey:["todos"],queryFn:async()=>{try{let e=b();if(e&&e.length>0)return e;let o=(await f.A.get(A)).data.todos;return y(o),o}catch(e){return console.error("Error fetching todos:",e),[]}}}),d=(0,p.n)({mutationFn:async e=>{try{let o=await f.A.post(A+"/add",{todo:e.todo,completed:!1,userId:Math.floor(15*Math.random())+1},{headers:{"Content-Type":"application/json"}}),r=b()||[],t={...o.data,id:Date.now()},d=[t,...r];return y(d),t}catch(r){console.error("Error adding todo to API:",r);let o={id:Date.now(),todo:e.todo,completed:!1,userId:Math.floor(15*Math.random())+1};return y([o,...b()||[]]),o}},onSuccess:()=>{e.invalidateQueries({queryKey:["todos"]})}});return{todos:o,isLoading:r,error:t,useAddTodo:d,deleteTodo:(0,p.n)({mutationFn:async e=>{if(y((b()||[]).filter(o=>o.id!==e)),e<100)try{await f.A.delete("".concat(A,"/").concat(e))}catch(e){console.error("Error deleting todo from API:",e)}},onSuccess:()=>{e.invalidateQueries({queryKey:["todos"]})}}),toggleTodo:(0,p.n)({mutationFn:async e=>{let o=b()||[],r=o.find(o=>o.id===e.id);if(!r)throw Error("Todo Not Found");let t=void 0!==e.todo&&e.todo!==r.todo,d=void 0!==e.completed&&e.completed!==r.completed,n=o.map(o=>{if(o.id===e.id){if(t&&void 0!==e.todo)return{...o,todo:e.todo};else if(d&&void 0!==e.completed)return{...o,completed:e.completed}}return o});if(y(n),e.id<100)try{if(t)return n.find(o=>o.id===e.id);if(d)return(await f.A.put("".concat(A,"/").concat(e.id),{completed:e.completed,todo:r.todo,userId:r.userId},{headers:{"Content-Type":"application/json"}})).data}catch(o){return console.error("Error updating todo in API:",o),n.find(o=>o.id===e.id)}return n.find(o=>o.id===e.id)},onSuccess:()=>{e.invalidateQueries({queryKey:["todos"]})}})}}();if(w)return(0,t.Y)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,t.Y)(i.A,{sx:{color:"primary.main"}})});if(v)return(0,t.Y)(n.A,{sx:{maxWidth:800,mx:"auto",p:2},children:(0,t.FD)(a.A,{severity:"error",sx:{mt:2,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:["Error loading todo: ",v.message]})});let D=x.find(e=>e.id===parseInt(o||"0"));return D?(0,t.FD)(n.A,{sx:{maxWidth:800,mx:"auto",p:2,minHeight:"100vh"},children:[(0,t.Y)(c.A,{startIcon:(0,t.Y)(h.A,{}),onClick:()=>r.push("/"),sx:{mb:2,background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",color:"white","&:hover":{background:"linear-gradient(45deg, #1976D2 30%, #00BCD4 90%)"}},children:"Back to List"}),(0,t.FD)(l.A,{sx:{p:4,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.1)",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)"},children:[(0,t.FD)(n.A,{sx:{mb:4},children:[(0,t.Y)(s.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary",mb:2},children:D.todo}),(0,t.Y)(u.A,{label:D.completed?"Completed":"Pending",color:D.completed?"success":"warning",sx:{mb:2,fontWeight:600,fontSize:"0.9rem",height:32,"& .MuiChip-label":{px:2}}})]}),(0,t.FD)(n.A,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,t.FD)(n.A,{sx:{p:2,borderRadius:1,bgcolor:"rgba(0,0,0,0.02)"},children:[(0,t.Y)(s.A,{variant:"subtitle2",color:"text.secondary",sx:{mb:1,fontWeight:600},children:"Status"}),(0,t.Y)(s.A,{sx:{fontWeight:500},children:D.completed?"Completed":"Pending"})]}),(0,t.FD)(n.A,{sx:{p:2,borderRadius:1,bgcolor:"rgba(0,0,0,0.02)"},children:[(0,t.Y)(s.A,{variant:"subtitle2",color:"text.secondary",sx:{mb:1,fontWeight:600},children:"User"}),(0,t.Y)(s.A,{sx:{fontWeight:500},children:D.userId})]}),(0,t.FD)(n.A,{sx:{p:2,borderRadius:1,bgcolor:"rgba(0,0,0,0.02)"},children:[(0,t.Y)(s.A,{variant:"subtitle2",color:"text.secondary",sx:{mb:1,fontWeight:600},children:"Todo ID"}),(0,t.Y)(s.A,{sx:{fontWeight:500},children:D.id})]})]})]})]}):(0,t.FD)(n.A,{sx:{maxWidth:800,mx:"auto",p:2},children:[(0,t.Y)(a.A,{severity:"error",sx:{mt:2,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:"Todo not found"}),(0,t.Y)(c.A,{startIcon:(0,t.Y)(h.A,{}),onClick:()=>r.push("/"),sx:{mt:2,background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",color:"white","&:hover":{background:"linear-gradient(45deg, #1976D2 30%, #00BCD4 90%)"}},children:"Back to List"})]})}}},e=>{e.O(0,[819,411,636,593,792],()=>e(e.s=33105)),_N_E=e.O()}]);